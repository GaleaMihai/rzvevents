<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products — RZVevents</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Wet+Paint&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{ --bg1:#0b0f1a; --bg2:#0f172a; --ink:#e7eefb; --muted:#9aa6c5; --btn:#d4af37; --btnHover:#c39a2f; --ring:rgba(255,255,255,.12); --card:rgba(255,255,255,.05); --maxw:1100px;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:linear-gradient(180deg,var(--bg1) 0%,var(--bg2) 100%);line-height:1.6;}

    /* HEADER + NAV (hamburger) */
    .site-header{
      position:sticky; top:0; z-index:50; backdrop-filter:blur(8px);
      background:linear-gradient(180deg,rgba(11,15,26,.9),rgba(15,23,42,.7));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .site-header__inner{
      max-width:var(--maxw); margin:0 auto; padding:10px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{ font-family:"Rubik Wet Paint", cursive; color:#ecf2ff; text-decoration:none; font-size:26px; }
    .nav{ display:flex; gap:16px; }
    .nav a{ color:#e7eefb; text-decoration:none; font-weight:700; padding:8px 10px; border-radius:10px; }
    .nav a:hover{ background:rgba(255,255,255,.06); }

    .nav-toggle{
      display:none; background:transparent; border:1px solid var(--ring);
      color:#e7eefb; padding:8px 10px; border-radius:10px; cursor:pointer;
      align-items:center; gap:8px;
    }
    .nav-toggle .bars{ width:18px; height:2px; background:#e7eefb; position:relative; display:block; }
    .nav-toggle .bars::before, .nav-toggle .bars::after{
      content:""; position:absolute; left:0; right:0; height:2px; background:#e7eefb;
    }
    .nav-toggle .bars::before{ top:-6px } .nav-toggle .bars::after{ top:6px }

    @media (max-width:820px){
      .nav{ display:none; position:absolute; top:100%; left:0; right:0;
            background:linear-gradient(180deg,rgba(11,15,26,.98),rgba(15,23,42,.95));
            border-bottom:1px solid rgba(255,255,255,.06);
            padding:10px 16px; flex-direction:column; gap:8px; }
      .nav.open{ display:flex; }
      .nav a{ padding:10px 12px }
      .nav-toggle{ display:inline-flex; }
    }

    /* CONȚINUT PAGINĂ */
    .wrap{max-width:var(--maxw);margin:0 auto;padding:32px 16px;}
    h1{font-family:"Rubik Wet Paint", cursive;font-size:clamp(42px,9vw,96px);margin:0 0 16px;text-align:center;color:#ecf2ff;text-shadow:0 3px 0 #111827,0 6px 18px #000,0 0 36px #60a5fa55,0 0 80px #3b82f655;}
    .muted{color:var(--muted)}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;margin:16px 0 22px;}
    .chip{padding:10px 16px;border-radius:999px;border:1px solid var(--ring);background:rgba(255,255,255,.05);color:var(--ink);cursor:pointer;font-weight:700;}
    .chip.active{background:var(--btn);color:#111;border-color:transparent}
    .search{min-width:240px;background:rgba(255,255,255,.04);border:1px solid var(--ring);color:var(--ink);border-radius:12px;padding:12px 14px;outline:none;}
    .sort{background:rgba(255,255,255,.04);border:1px solid var(--ring);color:var(--ink);border-radius:12px;padding:12px 14px;outline:none;}

    /* grid cu carduri de mărime constantă */
    .grid{display:grid; gap:16px; grid-template-columns: repeat(auto-fill, 300px); justify-content:center;}

    .card{
      background:var(--card);border:1px solid var(--ring);border-radius:18px;overflow:hidden;color:inherit;
      cursor:pointer; outline:none;
    }
    .card:focus{ box-shadow:0 0 0 3px rgba(212,175,55,.35); }
    .pad{padding:14px}
    .name{font-weight:800;margin:0 0 6px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .price{font-weight:800}
    .empty{border:1px dashed var(--ring);border-radius:14px;padding:24px;text-align:center;color:var(--muted)}
    .back{display:block;text-align:center;margin-top:28px;color:var(--muted);text-decoration:none}
    .back:hover{color:var(--ink);text-decoration:underline}

    /* imagine + săgeți */
    .imgwrap{position:relative}
    .img{
      aspect-ratio:4/3;
      background:#fff;
      background-size:contain;
      background-position:center;
      background-repeat:no-repeat;
      border-bottom:1px solid var(--ring);
    }
    .placeholder{width:100%;height:100%;display:grid;place-items:center;color:#64748b;font-weight:800;font-size:24px;letter-spacing:.5px}
    .nav-btn{
      position:absolute; top:50%; transform:translateY(-50%);
      width:34px; height:34px; border-radius:999px; border:1px solid var(--ring);
      background:rgba(0,0,0,.35); color:#fff; font-weight:800;
      display:grid; place-items:center; cursor:pointer; user-select:none;
    }
    .nav-btn:hover{background:rgba(0,0,0,.5)}
    .nav-prev{left:8px}
    .nav-next{right:8px}

    /* WhatsApp FAB (text) */
    .wa-fab{
      position:fixed; right:18px; bottom:18px; z-index:60;
      background:var(--btn); color:#111; border:1px solid rgba(0,0,0,.08);
      border-radius:999px; padding:12px 18px; font-weight:800; text-decoration:none;
      box-shadow:0 10px 24px rgba(0,0,0,.35);
    }
    .wa-fab:hover{ background:var(--btnHover); transform:translateY(-1px); }

    /* FOOTER opțional */
    footer{ border-top:1px solid rgba(255,255,255,.06); padding:18px 16px; text-align:center; color:var(--muted); }
  </style>
</head>
<body>

  <!-- HEADER cu hamburger -->
  <header class="site-header">
    <div class="site-header__inner">
      <a href="index.html" class="brand">RZVevents</a>

      <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="Deschide meniul">
        <span class="bars" aria-hidden="true"></span> Meniu
      </button>

      <nav id="site-nav" class="nav" role="navigation">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="products.html" aria-current="page">Products</a>
        <a href="evenimente.html">Evenimente</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <h1>Products</h1>
    <p class="muted" style="text-align:center;max-width:840px;margin:0 auto 4px">
      Mese, scaune, canapele și veselă pentru evenimente în Cluj & împrejurimi — montaj & transport gratuit în zonă.
    </p>

    <div class="toolbar">
      <button class="chip active" data-cat="all">Toate</button>
      <button class="chip" data-cat="mese">Mese</button>
      <button class="chip" data-cat="scaune">Scaune</button>
      <button class="chip" data-cat="canapele">Canapele</button>
      <button class="chip" data-cat="vesela">Veselă</button>

      <input id="search" class="search" type="search" placeholder="Caută produs..." />
      <select id="sort" class="sort" aria-label="Sortare">
        <option value="name-asc">Nume (A–Z)</option>
        <option value="price-asc">Preț (crescător)</option>
        <option value="price-desc">Preț (descrescător)</option>
      </select>
    </div>

    <div id="grid" class="grid"></div>
    <div id="empty" class="empty" style="display:none">Nu am găsit produse pentru filtrul/căutarea curentă.</div>

  </div>

  <footer>
    © <span id="year"></span> RZVevents · Cluj-Napoca · <a href="mailto:razvan@rzvevents.ro" style="color:inherit">razvan@rzvevents.ro</a>
  </footer>

  <!-- WhatsApp FAB (text) -->
  <a id="waFab" class="wa-fab" target="_blank" rel="noopener" aria-label="Scrie pe WhatsApp">WhatsApp</a>

  <script>
    async function fetchProducts(){ const r = await fetch('data/products.json'); if(!r.ok) throw new Error('load products'); return r.json(); }
    function initials(name){ return name.split(' ').map(w=>w[0]).join('').slice(0,3).toUpperCase(); }

    // Card fără „Vezi detalii”; întreg cardul e clickabil
    function card(p){
      const first = p.images?.[0] || p.image || '';
      const hasImage = !!first;
      const href = `product.html?id=${encodeURIComponent(p.id)}`;
      return `
        <article class="card" data-id="${p.id}" data-href="${href}" role="link" tabindex="0" aria-label="${p.name}">
          <div class="imgwrap">
            <div class="img" ${hasImage ? `style="background-image:url('${first}')" aria-label="${p.name}" role="img"` : ''}>
              ${!hasImage ? `<div class="placeholder">${initials(p.name)}</div>` : ''}
            </div>
            <button class="nav-btn nav-prev" aria-label="Prev">&#10094;</button>
            <button class="nav-btn nav-next" aria-label="Next">&#10095;</button>
          </div>
          <div class="pad">
            <h3 class="name">${p.name}</h3>
            <div class="row">
              <span class="price">${p.price_per_day} RON/zi</span>
              <span class="muted">${p.category}</span>
            </div>
          </div>
        </article>
      `;
    }

    (async ()=>{
      const data = await fetchProducts();
      const byId = Object.fromEntries(data.map(p=>[String(p.id), p]));

      const grid = document.getElementById('grid');
      const empty = document.getElementById('empty');
      const chips = Array.from(document.querySelectorAll('.chip'));
      const search = document.getElementById('search');
      const sortSel = document.getElementById('sort');
      let state = {cat:'all', q:'', sort:'name-asc'};

      function sorted(rows){
        const arr = [...rows];
        if(state.sort==='name-asc') arr.sort((a,b)=>a.name.localeCompare(b.name,'ro'));
        if(state.sort==='price-asc') arr.sort((a,b)=>a.price_per_day-b.price_per_day);
        if(state.sort==='price-desc') arr.sort((a,b)=>b.price_per_day-a.price_per_day);
        return arr;
      }

      function wireCarousels(){
        document.querySelectorAll('.card').forEach(card=>{
          const id = card.getAttribute('data-id');
          const prod = byId[id];
          const imgs = (prod.images && prod.images.length ? prod.images : (prod.image ? [prod.image] : []));
          const btns = card.querySelectorAll('.nav-btn');
          if(!imgs.length) { btns.forEach(b=>b.style.display='none'); return; }

          const imgDiv = card.querySelector('.img');
          let idx = 0;
          const setBg = (i)=>{
            idx = (i + imgs.length) % imgs.length;
            imgDiv.style.backgroundImage = `url('${imgs[idx]}')`;
          };
          setBg(0);

          const prev = card.querySelector('.nav-prev');
          const next = card.querySelector('.nav-next');

          // săgeți: schimbă imaginea, dar NU navighează
          prev.addEventListener('click', (e)=>{ e.preventDefault(); e.stopPropagation(); setBg(idx-1); });
          next.addEventListener('click', (e)=>{ e.preventDefault(); e.stopPropagation(); setBg(idx+1); });

          // swipe pe mobil
          let startX=null;
          imgDiv.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; }, {passive:true});
          imgDiv.addEventListener('touchend', e=>{
            if(startX===null) return;
            const dx = e.changedTouches[0].clientX - startX;
            if(Math.abs(dx) > 40){ dx < 0 ? setBg(idx+1) : setBg(idx-1); }
            startX=null;
          });
        });
      }

      function wireNavigation(){
        document.querySelectorAll('.card').forEach(card=>{
          const href = card.getAttribute('data-href');
          // click pe ORICE loc din card (săgețile au stopPropagation)
          card.addEventListener('click', ()=>{ window.location.href = href; });
          // accesibilitate: Enter / Space
          card.addEventListener('keydown', (e)=>{
            if(e.key === 'Enter' || e.key === ' '){
              e.preventDefault();
              window.location.href = href;
            }
          });
        });
      }

      function apply(){
        let rows = data;
        if(state.cat!=='all') rows = rows.filter(x=>x.category===state.cat);
        if(state.q){ const q=state.q.toLowerCase(); rows = rows.filter(x=>x.name.toLowerCase().includes(q)); }
        rows = sorted(rows);
        grid.innerHTML = rows.map(card).join('');
        empty.style.display = rows.length ? 'none' : 'block';
        wireCarousels();
        wireNavigation();
      }

      chips.forEach(ch=>ch.addEventListener('click',()=>{chips.forEach(c=>c.classList.remove('active')); ch.classList.add('active'); state.cat=ch.dataset.cat; apply();}));
      search.addEventListener('input', e=>{state.q=e.target.value.trim(); apply();});
      sortSel.addEventListener('change', e=>{state.sort=e.target.value; apply();});

      apply();

      // HEADER: hamburger
      const toggleBtn = document.querySelector('.nav-toggle');
      const nav = document.getElementById('site-nav');
      toggleBtn.addEventListener('click', ()=>{
        const open = nav.classList.toggle('open');
        toggleBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
        toggleBtn.setAttribute('aria-label', open ? 'Închide meniul' : 'Deschide meniul');
      });
      nav.querySelectorAll('a').forEach(a=>{
        a.addEventListener('click', ()=>{
          if(nav.classList.contains('open')){
            nav.classList.remove('open');
            toggleBtn.setAttribute('aria-expanded','false');
            toggleBtn.setAttribute('aria-label','Deschide meniul');
          }
        });
      });

      // WhatsApp FAB
      const PHONE_E164 = '40730578247';
      const waMsg = 'Bună! Aș dori informații despre închirieri RZVevents.';
      const waLink = `https://wa.me/${PHONE_E164}?text=${encodeURIComponent(waMsg)}`;
      document.getElementById('waFab').href = waLink;

      // anul în footer
      document.getElementById('year').textContent = new Date().getFullYear();
    })();
  </script>

  <!-- WhatsApp FAB (text) -->
  <a id="waFab" class="wa-fab" target="_blank" rel="noopener" aria-label="Scrie pe WhatsApp">WhatsApp</a>
</body>
</html>
